## Defence Solicitor Rota Generator

Generates a rota based on a specified number of firms, shifts, and days.

This (temporary) solution consists of two Ruby scripts, which can be
run in sequence or in isolation. In future this will be integrated
into the main Rota application as a black-box service.

### Fact Generation (`generate.rb`)

This script generates a series of clauses which represent the problem domain. It provides
a number of options to customise the size of the problem.

    --firms=NUM_FIRMS       Generates a problem space with NUM_FIRMS
                            firms. Default is set to 4 if not provided.

    --shifts=NUM_SHIFTS     Generates a problem space with NUM_SHIFTS
                            shifts. Default is set to 4 if not provided.

    --days=NUM_DAYS         Generates a problem space across NUM_DAYS
                            days. Default is set to 7 if not provided.

    --debug                 Outputs the number of firms, shifts, and
                            days to the console for debugging.

Once the problem space has been determined, facts are written out to
`firms.lp` for firms, `dates.lp` for days, and `per_day.lp` and
`shifts.lp` for shifts.

### Problem Solver (`solve.rb`)

This script runs `clingo` using the facts generated using the previous
script. The rota is generated by `clingo` and outputted on the console,
along with metrics which indicate the fair allocation of slots.

### Example Usage

To generate a rota with 6 firms, 5 shifts, and across two weeks:

    ruby generate.rb --firms=6 --shifts=5 --days=14; ruby solve.rb

And receive the following output:

    +-------------+
    | ALLOCATIONS |
    +-------------+

    +-----------------+-------+-------+-------+-------+-------+
    |                 | s1    | s2    | s3    | s4    | s5    |
    +-----------------+-------+-------+-------+-------+-------+
    | Fri, 01/05/2015 | ["d"] | ["b"] | ["a"] | ["c"] | ["f"] |
    | Sat, 02/05/2015 | ["e"] | ["c"] | ["b"] | ["a"] | ["d"] |
    | Sun, 03/05/2015 | ["c"] | ["e"] | ["d"] | ["b"] | ["f"] |
    | Mon, 04/05/2015 | ["a"] | ["c"] | ["e"] | ["f"] | ["b"] |
    | Tue, 05/05/2015 | ["a"] | ["f"] | ["e"] | ["d"] | ["c"] |
    | Wed, 06/05/2015 | ["b"] | ["a"] | ["f"] | ["e"] | ["d"] |
    | Thu, 07/05/2015 | ["d"] | ["f"] | ["a"] | ["c"] | ["e"] |
    | Fri, 08/05/2015 | ["f"] | ["e"] | ["b"] | ["a"] | ["c"] |
    | Sat, 09/05/2015 | ["f"] | ["d"] | ["c"] | ["a"] | ["b"] |
    | Sun, 10/05/2015 | ["e"] | ["d"] | ["c"] | ["b"] | ["a"] |
    | Mon, 11/05/2015 | ["e"] | ["d"] | ["c"] | ["b"] | ["a"] |
    | Tue, 12/05/2015 | ["d"] | ["b"] | ["f"] | ["e"] | ["c"] |
    | Wed, 13/05/2015 | ["b"] | ["a"] | ["d"] | ["f"] | ["e"] |
    | Thu, 14/05/2015 | ["c"] | ["b"] | ["a"] | ["d"] | ["f"] |
    +-----------------+-------+-------+-------+-------+-------+
    ===================================================================================================
    +--------+
    | TOTALS |
    +--------+

    +------+-------+
    | Firm | Total |
    +------+-------+
    | a    | 12    |
    | b    | 12    |
    | c    | 12    |
    | d    | 12    |
    | e    | 11    |
    | f    | 11    |
    +------+-------+
    ===================================================================================================
    +--------------+
    | SHIFT TOTALS |
    +--------------+

    +---+----+----+----+----+----+
    |   | s1 | s2 | s3 | s4 | s5 |
    +---+----+----+----+----+----+
    | a | 2  | 2  | 3  | 3  | 2  |
    | b | 2  | 3  | 2  | 3  | 2  |
    | c | 2  | 2  | 3  | 2  | 3  |
    | d | 3  | 3  | 2  | 2  | 2  |
    | e | 3  | 2  | 2  | 2  | 2  |
    | f | 2  | 2  | 2  | 2  | 3  |
    +---+----+----+----+----+----+

### Dependencies

* `clingo` - can be downloaded from
  [here](http://sourceforge.net/projects/potassco/files/clingo/).
  **Note**: Ensure to download version `3.0.5` and **not** version
  `4.x`.
* `tinytable` - a Ruby gem for outputting tables as ASCII, found
  [here](http://sourceforge.net/projects/potassco/files/clingo/).
